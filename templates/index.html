{% extends "base.html" %}
{% set mapStyle = ['normal','light','fresh','blue','darkblue','grey'] %}
{% set mapFeatures = ['bg','road','building','point'] %}

{% block content %}
    {# left #}
    <div class="el-col-8">

        <h1>样式</h1>
        <el-radio-group v-model="style" v-on:change="setMapStyle">
            {% for style in mapStyle %}
                <el-radio label="{{ style }}">{{ style }}</el-radio>
            {% endfor %}
        </el-radio-group>

        <h1>图层</h1>
        <el-checkbox-group v-model="features" v-on:change="setFeatures">
            {% for features in mapFeatures %}
                <el-checkbox label="{{ features }}">{{ features }}</el-checkbox>
            {% endfor %}
        </el-checkbox-group>
    </div>
    <div class="el-col-10">
        <div id="amap" style="width:600px; height:700px"></div>
    </div>
    <div class="el-col-6">right</div>
{% endblock %}

{% block script %}
    {# vue.js #}
    <script>
        var app = new Vue({
            el: '#vue',
            delimiters: ["{[", "]}"],
            data: {
                style: 'normal',
                features: ['bg', 'road']
            },
            methods: {
                setMapStyle: function () {
                    map.setMapStyle('amap://styles/' + app.style)
                },
                setFeatures: function () {
                    map.setFeatures(app.features)
                }
            }
        });
    </script>

    {# amap #}
    <script src="http://webapi.amap.com/maps?v=1.3&key={{ amap_key }}"></script>
    <script>
        var map = new AMap.Map('amap', {
            zoom: 11,
            center: [118.8, 32.1]
        });
    </script>
{% endblock %}